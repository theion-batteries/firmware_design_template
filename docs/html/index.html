<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Firmware Design Template: Firmware Design Template</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Firmware Design Template<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">To privde easy and efficient software design</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Firmware Design Template </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_C__Users_SamiDhiab_Theion_Repos_firm_Alignment_PrintHead_README"></a>An object oriented firmware design Template in c++ used for embedded systems. Currently support arduinos (Uno, Mega, Due...). The Concept can be ported for Esp family and other mcu that supports c++ and the standard library implementation.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Contributon and Policy</h1>
<ul>
<li><b>First Rule</b>: Do not touch the main branch unless you are the author <br  />
</li>
<li><b>Second Rule</b>: if you wish to contribute, create a derived branch from dev with your feature and name: dev_feature_name</li>
<li><b>Third Rule</b>: understand the graph below:</li>
</ul>
<p ><img src="docs/uml/contribution.png" alt="contribution" class="inline"/></p>
<ul>
<li><b>Author</b>: sami dhiab <br  />
 Contact: <a href="#" onclick="location.href='mai'+'lto:'+'sam'+'i@'+'the'+'io'+'n.d'+'e'; return false;">sami@<span class="obfuscator">.nosp@m.</span>thei<span class="obfuscator">.nosp@m.</span>on.de</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
API docs</h1>
<p >This docs is auto generated with doxygen. please note that images rendering from markdown file is not yet supported by doxygen, therefore click <a href="https://theionsami.github.io/firm_Alignment/">main</a> to open main page with rendered images. If not already on docs page, click <a href="https://theionsami.github.io/firm_Alignment/docs/html/index.html">docs</a>, then Under Classes and Files you find the full API. If you make a fork from this repo, dont forget to run doxygen from inside docs/ after any changes made to src/ inc/ or.md files and push! </p>
<h1><a class="anchor" id="autotoc_md3"></a>
Configuration File</h1>
<p >In the configuration <a href="include/Configs.h">file</a> you need to define all required parameters:</p>
<ul>
<li>PINS: pinout related to respective mcu</li>
<li>MACROS: DEBUG, VIRTUAL ,RELEASE or TEST</li>
<li>ENUMERATION: return values</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Simulation &amp; Virtualization</h1>
<p >To develop the firmware and test it in complete isolation from the hardware, a virtualisation platform is used called <a href="https://wokwi.com/">wokwi</a>. This provide a way to simulate a logic, algorithm or even some of the supported hardware (leds, sonar sensors, buttons, motors ...). Here is an example with arduino mega and connection with hardware. <img src="docs/img/sim_legend.JPG" alt="Simulation Legend" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md5"></a>
Command Design Pattern</h1>
<p >The Device or the mcu (SLave or listener) will wait for commands to parse from the server or master side. unless there are some background functions that run independantly from coming commands, the main task is to parse the commands. To be able to parse commands in a proper way, these commands must be defined inside classes, the receivers of commands are objects (sensors, actuators) that receive commands, invokers are entity that make indirect request via command to a receiver (internal controller ). The client is the app running. If we siimplify with an light switch example here:</p><ul>
<li>Receiver: Light</li>
<li>Command: turnOn, TurnOff</li>
<li><a class="el" href="class_invoker.html">Invoker</a>: light Switch <img src="docs/img/commandPattern.png" alt="cmd design pattern" class="inline"/> </li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Communication protocol: Definiton of messages and return values</h1>
<p >In many cases the master sending commands via Stream has to know the return of these Commands (if succes or fail) to process with next commands. Example of Commands and their return Value: retVal represents an enumeration that has ok=0 or err=1 which corresponds respectvly to succes and failure of that command.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">message   </th><th class="markdownTableHeadCenter">action   </th><th class="markdownTableHeadRight">return value   </th><th class="markdownTableHeadRight">return type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">get uuid   </td><td class="markdownTableBodyCenter">get device uuid   </td><td class="markdownTableBodyRight">uuid   </td><td class="markdownTableBodyRight">String    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">get motor x direction   </td><td class="markdownTableBodyCenter">return motor x direction   </td><td class="markdownTableBodyRight">direction   </td><td class="markdownTableBodyRight">String    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">set motor y delay &lt;value&gt;   </td><td class="markdownTableBodyCenter">set motor y delay value to   </td><td class="markdownTableBodyRight">null   </td><td class="markdownTableBodyRight">retVal    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">move z up &lt;value&gt;   </td><td class="markdownTableBodyCenter">move up z to value   </td><td class="markdownTableBodyRight">null   </td><td class="markdownTableBodyRight">retVal    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">undo   </td><td class="markdownTableBodyCenter">execute last cmd   </td><td class="markdownTableBodyRight">depends on last cmd   </td><td class="markdownTableBodyRight">depends on last cmd    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">reset   </td><td class="markdownTableBodyCenter">reset device   </td><td class="markdownTableBodyRight">null   </td><td class="markdownTableBodyRight">void    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">sleep   </td><td class="markdownTableBodyCenter">sleep device   </td><td class="markdownTableBodyRight">null   </td><td class="markdownTableBodyRight">void   </td></tr>
</table>
<p >It is up to to specify if &lt;value&gt; can int, float, double or any type ..</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Demonstrartion Video</h1>
<p >A demo value is coming soon.. </p>
<h1><a class="anchor" id="autotoc_md8"></a>
UML Class Diagramm</h1>
<p >Under <a href="docs/uml/">UML</a> folder are previous uml Diagrams. </p>
<h1><a class="anchor" id="autotoc_md9"></a>
UML state Diagram</h1>
<p >Deprecated. see <a href="docs/uml/">UML</a> folder for previous uml Diagrams. </p>
<h1><a class="anchor" id="autotoc_md10"></a>
UML Sequence Diagram</h1>
<p >see <a href="docs/uml/">UML</a> folder for previous uml Diagrams. </p>
<h1><a class="anchor" id="autotoc_md11"></a>
Test</h1>
<p >please refer to test folder readme for tests and definitions.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
V3 Features</h1>
<ul>
<li>implementing cmd design pattern</li>
<li>implementing threading/scheduling tasks</li>
<li>generating docsumentation fully with doxygen </li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
Change Log</h1>
<ul>
<li>19.05.2022: see older branch (master branch for change log)</li>
</ul>
<h1><a class="anchor" id="autotoc_md14"></a>
ROS Concept &amp; Integration</h1>
<p >For upcoming version, ros will be fully supported. <img src="docs/img/ros_concept_idea.png" alt="here" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md15"></a>
TODO</h1>
<ul>
<li>finish implementing scheduler</li>
<li>finish docs for all files </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
